onload=function(){setTimeout(function(){TweenMax.to(document.getElementById("intro"),.7,{opacity:0,onComplete:function(){document.getElementById("intro").style.display="none",document.getElementById("video-wrapper").style.display="block",(new TimelineMax).to(document.getElementById("video-wrapper"),1,{opacity:1,ease:Power4.easeIn}).from(j,2,{height:0,ease:Power4.easeOut}).from(J,2,{height:0,ease:Power4.easeOut},"-=2").from(document.querySelector("#overlayTop p"),2,{opacity:0,ease:Power4.easeOut},"-=1.5")}})},2e3);var s,e,t,r=document.querySelector("canvas"),n=r.getContext("2d"),i=document.getElementById("container"),c=document.getElementById("interactive-container"),l=!1,u="assets/video/ours-2.mp4",d=document.createElement("video"),o=document.querySelectorAll(".scene"),a=document.querySelectorAll(".plan"),m=document.getElementById("scene1"),g=document.getElementById("scene2"),w=document.getElementById("scene10"),v=document.querySelector("#scene1 #plan1"),y=document.querySelector("#scene1 #plan2"),p=document.querySelector("#scene2 #plan1"),f=document.querySelector("#scene10 #plan1"),x=(document.getElementById("svg-falaise"),document.getElementById("Scene1Plan1Fond1")),h=document.getElementById("Scene1Plan1Fond2"),T=document.getElementById("Scene1Plan1Fond1et2"),E=(document.getElementById("Scene1Plan1Fond3"),document.getElementById("Scene1Plan1NuagesArriere1")),L=document.getElementById("Scene1Plan1NuagesArriere2"),M=document.getElementById("Scene1Plan1NuagesArriere3"),P=document.getElementById("Scene1Plan1NuagesAvant1"),I=document.getElementById("Scene1Plan1NuagesAvant2"),A=document.getElementById("Scene1Plan1NuagesAvant3"),O=document.getElementById("Scene1Plan1NuagesAvant4"),S=document.getElementById("Scene1Plan1NuagesAvant5"),b=document.getElementById("Scene1Plan1NuagesAvant6"),B="scene1",N=(document.getElementById("svg-visage"),document.getElementById("Scene1Plan2NuagesArriere"),document.getElementById("Scene1Plan2NuagesArriere1")),q=document.getElementById("Scene1Plan2NuagesArriere2"),F=(document.getElementById("Scene1Plan2NuagesAvant"),document.getElementById("Scene1Plan2NuagesAvant1")),k=document.getElementById("Scene1Plan2NuagesAvant2"),C=document.getElementById("Scene1Plan2NuagesAvant3"),X=0,Y=document.querySelector("#Combi"),H=document.querySelector("#Carrosserie"),R=document.getElementById("roueArriere"),z=document.getElementById("roueAvant"),W=document.querySelectorAll(".spectators"),D=new Array(W.length),V=document.getElementById("mouse"),G=document.getElementById("playButton"),j=document.getElementById("overlayTop"),J=document.getElementById("overlayBottom"),U=document.getElementById("iconFullscreen"),K=!1,Q=document.querySelector("h1"),Z=document.querySelector("h2");function $(){o.forEach(function(e){e.parentNode.classList.remove("isActive")}),a.forEach(function(e){e.parentNode.classList.remove("isActive")}),_()}function _(){V.innerHTML="",V.classList.add("differenceMode"),TweenMax.to(V,.2,{width:10,height:10,ease:Power1.easeOut})}function ee(e){V.classList.remove("differenceMode"),""!=e&&"zoom"!=e?(V.innerHTML=e,TweenMax.to(V,.2,{width:100,height:100,ease:Power1.easeOut})):"zoom"===e?TweenMax.to(V,.2,{width:200,height:200,ease:Power1.easeOut}):_()}function te(e){(new TimelineLite).to(Y,.1,{y:-300,ease:Power1.easeOut}).to(Y,.2,{y:5.5,ease:Back.easeIn,overwrite:"none"})}d.src=u,d.autoPlay=!1,d.loop=!1,d.muted=!1,d.setAttribute("width",i.offsetWidth),d.setAttribute("height",i.offsetHeight),t={video:d,ready:!1},r.width=d.width,r.height=d.height,_(),G.addEventListener("click",function(){if(!0===t.ready){function o(){i.addEventListener("mouseover",function(e){var t=e.pageX,n=e.pageY,o=0,a=0;o=r.width/2-t,a=r.height/2-n,TweenMax.to(x,2,{css:{transform:"translateX("+o/17+"px) translateY("+a/17+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(h,2,{css:{transform:"translateX("+o/30+"px) translateY("+a/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(S,2,{css:{transform:"translateX("+o/6+"px) translateY("+a/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(P,2,{css:{transform:"translateX("+o/6+"px) translateY("+a/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(O,2,{css:{transform:"translateX("+o/6+"px) translateY("+a/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(A,2,{css:{transform:"translateX("+o/10+"px) translateY("+a/10+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(b,2,{css:{transform:"translateX("+o/10+"px) translateY("+a/10+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(I,2,{css:{transform:"translateX("+o/15+"px) translateY("+a/15+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(L,2,{css:{transform:"translateX("+o/30+"px) translateY("+a/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(M,2,{css:{transform:"translateX("+o/30+"px) translateY("+a/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(E,2,{css:{transform:"translateX("+o/60+"px) translateY("+a/60+"px)"},ease:Power2.easeOut,overwrite:"none"})}),"scene1"===B?TweenMax.to(T,9,{css:{transform:"scale(1.06)"},ease:Linear.easeOut}):(TweenMax.set(T,{css:{transform:"scale(1.25)"}}),TweenMax.to(T,5.5,{css:{transform:"scale(1)"},ease:Linear.easeOut})),ee(s)}function a(e,t,n){switch(function(e,t){if("HOLD"!=s){var n=new TimelineLite;n.set(Y,{x:-1500,y:e,overwrite:"all"}).to(Y,2,{x:-500,transformOrigin:"50% 50%",ease:Power4.easeOut}).to(Y,t,{x:900,transformOrigin:"50% 50%",ease:Linear.easeNone},"-=1").to(Y,1,{x:1400,transformOrigin:"50% 50%",ease:Power4.easeIn})}else{var n=new TimelineLite;n.set(Y,{x:-1500,y:e,overwrite:"all"}).to(Y,1,{x:-500,transformOrigin:"50% 50%",ease:Power4.easeOut})}TweenMax.to(R,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone}),TweenMax.to(z,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone}),new TimelineMax({repeat:-1}).to(H,.2,{y:"+=20px",ease:Linear.easeNone}).to(H,.2,{y:"-=20px",ease:Linear.easeNone})}(t,n),ee(s),e){case 0:Y.addEventListener("mouseover",function(e){e.target.classList.contains("blueGradient")?(e.target.classList="",e.target.classList.add("st44")):(e.target.classList="",e.target.classList.add("st45"),e.target.classList.add("blueGradient"))});break;case 1:i.addEventListener("click",te,!0);break;case 2:o=!1,i.addEventListener("mousedown",function(){o||(console.log("hold"),console.log("holdFini = "+o),TweenMax.to(Y,1.5,{x:r.width-600,ease:Power3.easeOut,overwrite:"none"}),TweenMax.to(R,.2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone,overwrite:"none"}),TweenMax.to(z,.2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone,overwrite:"none"}))}),i.addEventListener("mouseup",function(){o||(console.log("lache"),TweenMax.to(Y,1.5,{x:-500,ease:Power3.easeOut,overwrite:"none"}),TweenMax.to(R,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone}),TweenMax.to(z,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone}))}),setTimeout(function(){o=!0;var e=new TimelineMax;e.to(Y,1,{x:900,transformOrigin:"50% 50%",ease:Power3.easeOut,overwrite:"all"}).to(Y,1,{x:1400,transformOrigin:"50% 50%",ease:Power4.easeIn,overwrite:"all"})},11e3),i.removeEventListener("click",te,!0)}var o}console.log(d.currentTime),s="MOVE",o(),t.video.paused&&!l&&t.video.play(),e=setInterval(function(){n.drawImage(t.video,0,0,t.video.width,t.video.height)},20),m.classList.add("isActive"),v.classList.add("isActive"),setTimeout(function(){var n;console.log("visage"),v.classList.remove("isActive"),y.classList.add("isActive"),S.style.display="none",n=!(s="CLEAR"),i.addEventListener("mouseover",function(e){X+=6;var t=e.target.id;if(e.target.classList.contains("Scene1Plan2Nuages")&&!n)switch(t){case"Scene1Plan2NuagesAvant3":TweenMax.to(e.target,1,{css:{transform:"translate("+X+"px, "+X+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesAvant2":TweenMax.to(e.target,1,{css:{transform:"translate(-"+X+"px, -"+X+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesAvant1":TweenMax.to(e.target,1,{css:{transform:"translate(-"+X+"px, "+X+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesArriere2":TweenMax.to(e.target,1,{css:{transform:"translate("+X+"px, -"+X+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesArriere1":TweenMax.to(e.target,1,{css:{transform:"translateX(-"+X+"px)"},ease:Power2.easeOut,overwrite:"none"})}ee(s)}),setTimeout(function(){n=!0,TweenMax.to(C,1,{x:r.width+200,y:r.height+200,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(k,1,{x:-400,y:-400,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(F,1,{x:-800,y:r.height+100,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(q,1,{x:r.width,y:-100,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(N,1,{x:-700,ease:Power4.easeIn,overwrite:"all"})},3500),setTimeout(function(){console.log("van ville"),m.classList.remove("isActive"),y.classList.remove("isActive"),g.classList.add("isActive"),p.classList.add("isActive"),s="HOVER",a(0,130,12.7),setTimeout(function(){console.log("chambre famille"),$(),p.classList.remove("isActive"),s="",setTimeout(function(){console.log("van neige"),g.classList.add("isActive"),p.classList.add("isActive"),s="CLIC",a(1,0,5.5),setTimeout(function(){var e,t;console.log("jungle"),g.classList.remove("isActive"),p.classList.remove("isActive"),s="",e=V.offsetWidth/d.width,t=V.offsetHeight/d.height,V.style.backgroundColor="transparent",V.style.border="2px solid #fff",V.style.backgroundImage="url('"+u+"')",V.style.backgroundSize=d.width*e+"px "+d.height*t+"px",ee("zoom"),setTimeout(function(){V.style.backgroundColor="#fff",g.classList.add("isActive"),p.classList.add("isActive"),console.log("van montagnes"),s="HOLD",a(2,-10,11.2),setTimeout(function(){console.log("pilule"),g.classList.remove("isActive"),p.classList.remove("isActive"),$(),s="",setTimeout(function(){console.log("psyché"),$(),s="",setTimeout(function(){console.log("plage"),$(),s="",setTimeout(function(){console.log("van désert"),$(),s="",setTimeout(function(){var e,t,n;console.log("concert loin"),w.classList.add("isActive"),f.classList.add("isActive"),s="CLIC",e=new TimelineMax({repeat:-1}),t=new TimelineMax({repeat:-1}),n=new TimelineMax({repeat:-1}),e.staggerTo("#Rang1 .spectators",.2,{repeat:1,yoyo:!0,y:"-=40"},.001),t.staggerTo("#Rang2 .spectators",.2,{repeat:1,yoyo:!0,y:"-=50"},.002),n.staggerTo("#Rang3 .spectators",.2,{repeat:1,yoyo:!0,y:"-=60"},.003),i.addEventListener("click",function(){for(var e=Math.round(70*Math.random()),t=Math.round(70*Math.random()),n=new TimelineMax({repeat:-1}),o=0;o<t;o++)D.includes(e)||(n.to(W[e],.2,{y:"-=100px",repeat:1,yoyo:!0,ease:Linear.easeNone}),D.push(e))}),setTimeout(function(){console.log("DJ"),$(),s="",setTimeout(function(){console.log("Dernières falaise"),m.classList.add("isActive"),v.classList.add("isActive"),s="MOVE",B="scene11",o(),setTimeout(function(){TweenMax.to(i,1,{opacity:0,ease:Linear.easeNone,onComplete:function(){i.style.display="none",i.style.visibility="hidden"}})},3e3)},13599)},15520)},15280)},15634)},15596)},1770)},13480)},15440)},7920)},7730)},15389)},5597)},9844),TweenMax.to(i,3,{opacity:1,ease:Linear.easeNone}),TweenMax.to(G,1,{opacity:0,onComplete:function(){G.style.display="none",G.style.visibility="hidden"}}),TweenMax.to(Q,1,{opacity:0,onComplete:function(){Q.style.display="none",Q.style.visibility="hidden"}}),TweenMax.to(Z,1,{opacity:0,onComplete:function(){Z.style.display="none",Z.style.visibility="hidden"}}),c.addEventListener("mouseleave",function(e){_()}),c.addEventListener("mouseenter",function(e){ee(s)}),TweenMax.to(J,.7,{height:"50px",lineHeight:"57px",ease:Power4.easeIn}),TweenMax.to(j,.7,{height:0,ease:Power4.easeIn,onComplete:function(){document.querySelector("#overlayTop p").style.display="none"}}),TweenMax.from(document.querySelector("#overlayTop p"),.5,{opacity:0,ease:Power4.easeIn})}}),t.video.oncanplaythrough=function(){console.log("video prete"),t.ready=!0},t.video.onplaying=function(){!(l=!0)},t.video.onpause=function(){!(l=!1),clearInterval(e)},d.onerror=function(){document.body.removeChild(r),document.body.innerHTML+="<h2>There is a problem loading the video</h2><br>",document.body.innerHTML+="Users of IE9+ , the browser does not support WebM videos used by this demo",document.body.innerHTML+="<br><a href='https://tools.google.com/dlpage/webmmf/'> Download IE9+ WebM support</a> from tools.google.com<br> this includes Edge and Windows 10"},window.onresize=function(){d.setAttribute("width",i.offsetWidth),d.setAttribute("height",i.offsetHeight),r.width=d.width,r.height=d.height},window.onmousemove=function(e){V.style.top=e.pageY+"px",V.style.left=e.pageX+"px"},U.addEventListener("click",function(){K?(K=!1,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(K=!0,document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen())})};