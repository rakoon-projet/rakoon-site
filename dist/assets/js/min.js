onload=function(){setTimeout(function(){TweenMax.to(document.getElementById("intro"),.7,{opacity:0,onComplete:function(){document.getElementById("intro").style.display="none",document.getElementById("video-wrapper").style.display="block",(new TimelineMax).to(document.getElementById("video-wrapper"),1,{opacity:1,ease:Power4.easeIn}).from(R,2,{height:0,ease:Power4.easeOut}).from(W,2,{height:0,ease:Power4.easeOut},"-=2").from(document.querySelector("#overlayTop p"),2,{opacity:0,ease:Power4.easeOut},"-=1.5")}})},2e3);var a,t,n,s=document.querySelector("canvas"),o=s.getContext("2d"),r=document.getElementById("container"),i=document.getElementById("interactive-container"),c=!1,l="assets/video/ours-2.mp4",u=document.createElement("video"),e=document.querySelectorAll(".scene"),d=document.querySelectorAll(".plan"),m=document.getElementById("scene1"),g=document.getElementById("scene2"),w=document.querySelector("#scene1 #plan1"),v=document.querySelector("#scene1 #plan2"),y=document.querySelector("#scene2 #plan1"),f=(document.getElementById("svg-falaise"),document.getElementById("Scene1Plan1Fond1")),p=document.getElementById("Scene1Plan1Fond2"),x=document.getElementById("Scene1Plan1Fond1et2"),h=(document.getElementById("Scene1Plan1Fond3"),document.getElementById("Scene1Plan1NuagesArriere1")),E=document.getElementById("Scene1Plan1NuagesArriere2"),T=document.getElementById("Scene1Plan1NuagesArriere3"),P=document.getElementById("Scene1Plan1NuagesAvant1"),I=document.getElementById("Scene1Plan1NuagesAvant2"),L=document.getElementById("Scene1Plan1NuagesAvant3"),M=document.getElementById("Scene1Plan1NuagesAvant4"),A=document.getElementById("Scene1Plan1NuagesAvant5"),S=document.getElementById("Scene1Plan1NuagesAvant6"),B=(document.getElementById("svg-visage"),document.getElementById("Scene1Plan2NuagesArriere"),document.getElementById("Scene1Plan2NuagesArriere1")),b=document.getElementById("Scene1Plan2NuagesArriere2"),O=(document.getElementById("Scene1Plan2NuagesAvant"),document.getElementById("Scene1Plan2NuagesAvant1")),N=document.getElementById("Scene1Plan2NuagesAvant2"),q=document.getElementById("Scene1Plan2NuagesAvant3"),F=0,k=document.querySelector("#Combi"),C=document.querySelector("#Carrosserie"),X=document.getElementById("roueArriere"),Y=document.getElementById("roueAvant"),z=document.getElementById("mouse"),H=document.getElementById("playButton"),R=document.getElementById("overlayTop"),W=document.getElementById("overlayBottom"),D=document.getElementById("iconFullscreen"),G=!1,V=document.querySelector("h1"),j=document.querySelector("h2");function J(){e.forEach(function(e){e.parentNode.classList.remove("isActive")}),d.forEach(function(e){e.parentNode.classList.remove("isActive")}),U()}function U(){z.innerHTML="",z.classList.add("differenceMode"),TweenMax.to(z,.2,{width:10,height:10,ease:Power1.easeOut})}function K(e){z.classList.remove("differenceMode"),""!=e&&"zoom"!=e?(z.innerHTML=e,TweenMax.to(z,.2,{width:100,height:100,ease:Power1.easeOut})):"zoom"===e?TweenMax.to(z,.2,{width:200,height:200,ease:Power1.easeOut}):U()}function Q(){k.addEventListener("mouseover",function(e){e.target.classList.contains("blueGradient")?(e.target.classList="",e.target.classList.add("st44")):(e.target.classList="",e.target.classList.add("st45"),e.target.classList.add("blueGradient"))})}u.src=l,u.autoPlay=!1,u.loop=!1,u.muted=!1,u.setAttribute("width",r.offsetWidth),u.setAttribute("height",r.offsetHeight),n={video:u,ready:!1},s.width=u.width,s.height=u.height,U(),H.addEventListener("click",function(){if(!0===n.ready){function e(e,t,n){switch(function(e,t){(new TimelineLite).set(k,{x:-1500,y:e}).to(k,2,{x:-500,transformOrigin:"50% 50%",ease:Power4.easeOut}).to(k,t,{x:900,transformOrigin:"50% 50%",ease:Linear.easeNone},"-=1").to(k,1,{x:1400,transformOrigin:"50% 50%",ease:Power4.easeIn}),TweenMax.to(X,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone}),TweenMax.to(Y,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone});var n=20*Math.random()+10;new TimelineMax({repeat:-1}).to(C,.2,{y:"+="+n+"px",ease:Linear.easeNone}).to(C,.2,{y:"-="+n+"10px",ease:Linear.easeNone})}(t,n),Q(),K(a),e){case 1:Q(),o=t,r.addEventListener("click",function(){var e=new TimelineLite;e.to(k,.1,{y:-300,ease:Power1.easeOut}).to(k,.2,{y:o,ease:Back.easeIn,overwrite:"none"})})}var o}console.log(u.currentTime),a="MOVE",r.addEventListener("mouseover",function(e){var t=e.pageX,n=e.pageY,o=0,a=0;o=s.width/2-t,a=s.height/2-n,TweenMax.to(f,2,{css:{transform:"translateX("+o/17+"px) translateY("+a/17+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(p,2,{css:{transform:"translateX("+o/30+"px) translateY("+a/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(A,2,{css:{transform:"translateX("+o/6+"px) translateY("+a/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(P,2,{css:{transform:"translateX("+o/6+"px) translateY("+a/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(M,2,{css:{transform:"translateX("+o/6+"px) translateY("+a/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(L,2,{css:{transform:"translateX("+o/10+"px) translateY("+a/10+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(S,2,{css:{transform:"translateX("+o/10+"px) translateY("+a/10+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(I,2,{css:{transform:"translateX("+o/15+"px) translateY("+a/15+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(E,2,{css:{transform:"translateX("+o/30+"px) translateY("+a/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(T,2,{css:{transform:"translateX("+o/30+"px) translateY("+a/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(h,2,{css:{transform:"translateX("+o/60+"px) translateY("+a/60+"px)"},ease:Power2.easeOut,overwrite:"none"})}),TweenMax.to(x,9,{css:{transform:"scale(1.06)"},ease:Linear.easeOut}),K(a),n.video.paused&&!c&&n.video.play(),t=setInterval(function(){o.drawImage(n.video,0,0,n.video.width,n.video.height)},20),m.classList.add("isActive"),w.classList.add("isActive"),setTimeout(function(){var n;console.log("visage"),w.classList.remove("isActive"),v.classList.add("isActive"),n=!(a="CLEAR"),r.addEventListener("mouseover",function(e){F+=6;var t=e.target.id;if(e.target.classList.contains("Scene1Plan2Nuages")&&!n)switch(t){case"Scene1Plan2NuagesAvant3":TweenMax.to(e.target,1,{css:{transform:"translate("+F+"px, "+F+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesAvant2":TweenMax.to(e.target,1,{css:{transform:"translate(-"+F+"px, -"+F+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesAvant1":TweenMax.to(e.target,1,{css:{transform:"translate(-"+F+"px, "+F+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesArriere2":TweenMax.to(e.target,1,{css:{transform:"translate("+F+"px, -"+F+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesArriere1":TweenMax.to(e.target,1,{css:{transform:"translateX(-"+F+"px)"},ease:Power2.easeOut,overwrite:"none"})}K(a)}),setTimeout(function(){n=!0,TweenMax.to(q,1,{x:s.width+200,y:s.height+200,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(N,1,{x:-400,y:-400,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(O,1,{x:-800,y:s.height+100,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(b,1,{x:s.width,y:-100,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(B,1,{x:-700,ease:Power4.easeIn,overwrite:"all"})},3500),setTimeout(function(){console.log("van ville"),m.classList.remove("isActive"),v.classList.remove("isActive"),g.classList.add("isActive"),y.classList.add("isActive"),a="HOVER",e(0,130,12.7),setTimeout(function(){console.log("chambre famille"),J(),y.classList.remove("isActive"),a="",setTimeout(function(){console.log("van neige"),g.classList.add("isActive"),y.classList.add("isActive"),a="CLIC",e(1,0,5.5),setTimeout(function(){var e,t;console.log("jungle"),g.classList.remove("isActive"),y.classList.remove("isActive"),a="zoom",e=z.offsetWidth/u.width,t=z.offsetHeight/u.height,z.style.backgroundColor="transparent",z.style.border="2px solid #fff",z.style.backgroundImage="url('"+l+"')",z.style.backgroundSize=u.width*e+"px "+u.height*t+"px",K("zoom"),setTimeout(function(){z.style.backgroundColor="#fff",console.log("van montagnes"),J(),a="",setTimeout(function(){console.log("pilule"),J(),a="",setTimeout(function(){console.log("psyché"),J(),a="",setTimeout(function(){console.log("plage"),J(),a="",setTimeout(function(){console.log("van désert"),J(),a="",setTimeout(function(){console.log("concert loin"),J(),a="",setTimeout(function(){console.log("DJ"),J(),a="",setTimeout(function(){console.log("Dernières falaise"),J(),a=""},13599)},15520)},15280)},15634)},15596)},1770)},13480)},15440)},7920)},7730)},15389)},5597)},9844),TweenMax.to(r,3,{opacity:1,ease:Linear.easeNone}),TweenMax.to(H,1,{opacity:0,onComplete:function(){H.style.display="none",H.style.visibility="hidden"}}),TweenMax.to(V,1,{opacity:0,onComplete:function(){V.style.display="none",V.style.visibility="hidden"}}),TweenMax.to(j,1,{opacity:0,onComplete:function(){j.style.display="none",j.style.visibility="hidden"}}),i.addEventListener("mouseleave",function(e){U()}),i.addEventListener("mouseenter",function(e){K(a)}),TweenMax.to(W,.7,{height:"50px",lineHeight:"57px",ease:Power4.easeIn}),TweenMax.to(R,.7,{height:0,ease:Power4.easeIn,onComplete:function(){document.querySelector("#overlayTop p").style.display="none"}}),TweenMax.from(document.querySelector("#overlayTop p"),.5,{opacity:0,ease:Power4.easeIn})}}),n.video.oncanplaythrough=function(){console.log("video prete"),n.ready=!0},n.video.onplaying=function(){!(c=!0)},n.video.onpause=function(){!(c=!1),clearInterval(t)},u.onerror=function(){document.body.removeChild(s),document.body.innerHTML+="<h2>There is a problem loading the video</h2><br>",document.body.innerHTML+="Users of IE9+ , the browser does not support WebM videos used by this demo",document.body.innerHTML+="<br><a href='https://tools.google.com/dlpage/webmmf/'> Download IE9+ WebM support</a> from tools.google.com<br> this includes Edge and Windows 10"},window.onresize=function(){u.setAttribute("width",r.offsetWidth),u.setAttribute("height",r.offsetHeight),s.width=u.width,s.height=u.height},window.onmousemove=function(e){z.style.top=e.pageY+"px",z.style.left=e.pageX+"px"},D.addEventListener("click",function(){G?(G=!1,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(G=!0,document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen())})};