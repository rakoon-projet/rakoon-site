onload=function(){setTimeout(function(){TweenMax.to(document.getElementById("intro"),.7,{opacity:0,onComplete:function(){document.getElementById("intro").style.display="none",document.getElementById("video-wrapper").style.display="block",(new TimelineMax).to(document.getElementById("video-wrapper"),1,{opacity:1,ease:Power4.easeIn}).from(b,2,{height:0,ease:Power4.easeOut}).from(M,2,{height:0,ease:Power4.easeOut},"-=2").from(document.querySelector("#overlayTop p"),2,{opacity:0,ease:Power4.easeOut},"-=1.5")}})},2e3);var s,n,o,a=document.querySelector("canvas"),i=a.getContext("2d"),c=document.getElementById("container"),r=document.getElementById("interactive-container"),l=!1,u="assets/video/ours-2.mp4",d=document.createElement("video"),e=document.querySelectorAll(".scene"),t=document.querySelectorAll(".plan"),m=document.getElementById("scene1"),g=document.getElementById("scene2"),y=document.querySelector("#scene1 #plan1"),v=document.querySelector("#scene1 #plan2"),f=document.querySelector("#scene2 #plan1"),w=(document.getElementById("svg-falaise"),document.getElementById("Scene1Plan1Fond1"),document.getElementById("Scene1Plan1Fond2"),document.getElementById("Scene1Plan1Fond1et2"),document.getElementById("Scene1Plan1Fond3"),document.getElementById("Scene1Plan1NuagesArriere1"),document.getElementById("Scene1Plan1NuagesArriere2"),document.getElementById("Scene1Plan1NuagesArriere3"),document.getElementById("Scene1Plan1NuagesAvant1"),document.getElementById("Scene1Plan1NuagesAvant2"),document.getElementById("Scene1Plan1NuagesAvant3"),document.getElementById("Scene1Plan1NuagesAvant4"),document.getElementById("Scene1Plan1NuagesAvant5"),document.getElementById("Scene1Plan1NuagesAvant6"),document.getElementById("svg-visage"),document.getElementById("Scene1Plan2NuagesArriere"),document.getElementById("Scene1Plan2NuagesArriere1")),h=document.getElementById("Scene1Plan2NuagesArriere2"),p=(document.getElementById("Scene1Plan2NuagesAvant"),document.getElementById("Scene1Plan2NuagesAvant1")),E=document.getElementById("Scene1Plan2NuagesAvant2"),x=document.getElementById("Scene1Plan2NuagesAvant3"),I=0,T=document.querySelector("#Combi"),P=document.querySelector("#Carrosserie"),L=document.getElementById("roueArriere"),A=document.getElementById("roueAvant"),S=document.getElementById("mouse"),B=document.getElementById("playButton"),b=document.getElementById("overlayTop"),M=document.getElementById("overlayBottom"),N=document.getElementById("iconFullscreen"),q=!1,F=document.querySelector("h1"),O=document.querySelector("h2");function k(){e.forEach(function(e){e.parentNode.classList.remove("isActive")}),t.forEach(function(e){e.parentNode.classList.remove("isActive")}),C()}function C(){S.innerHTML="",S.classList.add("differenceMode"),TweenMax.to(S,.2,{width:10,height:10,ease:Power1.easeOut})}function z(e){S.classList.remove("differenceMode"),""!=e&&"zoom"!=e?(S.innerHTML=e,TweenMax.to(S,.2,{width:100,height:100,ease:Power1.easeOut})):"zoom"===e?TweenMax.to(S,.2,{width:200,height:200,ease:Power1.easeOut}):C()}function H(){T.addEventListener("mouseover",function(e){e.target.classList.contains("blueGradient")?(e.target.classList="",e.target.classList.add("st44")):(e.target.classList="",e.target.classList.add("st45"),e.target.classList.add("blueGradient"))})}d.src=u,d.autoPlay=!1,d.loop=!1,d.muted=!1,d.setAttribute("width",c.offsetWidth),d.setAttribute("height",c.offsetHeight),o={video:d,ready:!1},a.width=d.width,a.height=d.height,C(),B.addEventListener("click",function(){if(!0===o.ready){function e(e,t,n){switch(function(e,t){(new TimelineLite).set(T,{x:-1500,y:e}).to(T,2,{x:-500,transformOrigin:"50% 50%",ease:Power4.easeOut}).to(T,t,{x:900,transformOrigin:"50% 50%",ease:Linear.easeNone},"-=1").to(T,1,{x:1400,transformOrigin:"50% 50%",ease:Power4.easeIn}),TweenMax.to(L,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone}),TweenMax.to(A,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone});var n=20*Math.random()+10;new TimelineMax({repeat:-1}).to(P,.2,{y:"+="+n+"px",ease:Linear.easeNone}).to(P,.2,{y:"-="+n+"10px",ease:Linear.easeNone})}(t,n),H(),z(s),e){case 1:H(),o=t,c.addEventListener("click",function(){var e=new TimelineLite;e.to(T,.1,{y:-300,ease:Power1.easeOut}).to(T,.2,{y:o,ease:Back.easeIn,overwrite:"none"})})}var o}function t(){var e=S.offsetWidth/d.width,t=S.offsetHeight/d.height;S.style.backgroundColor="transparent",S.style.border="2px solid #fff",S.style.backgroundImage="url('"+u+"')",S.style.backgroundSize=d.width*e+"px "+d.height*t+"px",z("zoom")}console.log(d.currentTime),t(),s="zoom",o.video.paused&&!l&&o.video.play(),n=setInterval(function(){i.drawImage(o.video,0,0,o.video.width,o.video.height)},20),m.classList.add("isActive"),y.classList.add("isActive"),setTimeout(function(){var n;console.log("visage"),y.classList.remove("isActive"),v.classList.add("isActive"),n=!(s="CLEAR"),c.addEventListener("mouseover",function(e){I+=6;var t=e.target.id;if(e.target.classList.contains("Scene1Plan2Nuages")&&!n)switch(t){case"Scene1Plan2NuagesAvant3":TweenMax.to(e.target,1,{css:{transform:"translate("+I+"px, "+I+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesAvant2":TweenMax.to(e.target,1,{css:{transform:"translate(-"+I+"px, -"+I+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesAvant1":TweenMax.to(e.target,1,{css:{transform:"translate(-"+I+"px, "+I+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesArriere2":TweenMax.to(e.target,1,{css:{transform:"translate("+I+"px, -"+I+"px)"},ease:Power2.easeOut,overwrite:"none"});break;case"Scene1Plan2NuagesArriere1":TweenMax.to(e.target,1,{css:{transform:"translateX(-"+I+"px)"},ease:Power2.easeOut,overwrite:"none"})}z(s)}),setTimeout(function(){n=!0,TweenMax.to(x,1,{x:a.width+200,y:a.height+200,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(E,1,{x:-400,y:-400,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(p,1,{x:-800,y:a.height+100,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(h,1,{x:a.width,y:-100,ease:Power4.easeIn,overwrite:"all"}),TweenMax.to(w,1,{x:-700,ease:Power4.easeIn,overwrite:"all"})},3500),setTimeout(function(){console.log("van ville"),m.classList.remove("isActive"),v.classList.remove("isActive"),g.classList.add("isActive"),f.classList.add("isActive"),s="HOVER",e(0,130,12.7),setTimeout(function(){console.log("chambre famille"),k(),f.classList.remove("isActive"),s="",setTimeout(function(){console.log("van neige"),g.classList.add("isActive"),f.classList.add("isActive"),s="CLIC",e(1,0,5.5),setTimeout(function(){console.log("jungle"),g.classList.remove("isActive"),f.classList.remove("isActive"),s="",t(),setTimeout(function(){S.style.backgroundColor="#fff",console.log("van montagnes"),k(),s="",setTimeout(function(){console.log("pilule"),k(),s="",setTimeout(function(){console.log("psyché"),k(),s="",setTimeout(function(){console.log("plage"),k(),s="",setTimeout(function(){console.log("van désert"),k(),s="",setTimeout(function(){console.log("concert loin"),k(),s="",setTimeout(function(){console.log("DJ"),k(),s="",setTimeout(function(){console.log("Dernières falaise"),k(),s=""},13599)},15520)},15280)},15634)},15596)},1770)},13480)},15440)},7920)},7730)},15389)},5597)},9844),TweenMax.to(c,3,{opacity:1,ease:Linear.easeNone}),TweenMax.to(B,1,{opacity:0,onComplete:function(){B.style.display="none",B.style.visibility="hidden"}}),TweenMax.to(F,1,{opacity:0,onComplete:function(){F.style.display="none",F.style.visibility="hidden"}}),TweenMax.to(O,1,{opacity:0,onComplete:function(){O.style.display="none",O.style.visibility="hidden"}}),r.addEventListener("mouseleave",function(e){C()}),r.addEventListener("mouseenter",function(e){z(s)}),TweenMax.to(M,.7,{height:"50px",lineHeight:"57px",ease:Power4.easeIn}),TweenMax.to(b,.7,{height:0,ease:Power4.easeIn,onComplete:function(){document.querySelector("#overlayTop p").style.display="none"}}),TweenMax.from(document.querySelector("#overlayTop p"),.5,{opacity:0,ease:Power4.easeIn})}}),o.video.oncanplaythrough=function(){console.log("video prete"),o.ready=!0},o.video.onplaying=function(){!(l=!0)},o.video.onpause=function(){!(l=!1),clearInterval(n)},d.onerror=function(){document.body.removeChild(a),document.body.innerHTML+="<h2>There is a problem loading the video</h2><br>",document.body.innerHTML+="Users of IE9+ , the browser does not support WebM videos used by this demo",document.body.innerHTML+="<br><a href='https://tools.google.com/dlpage/webmmf/'> Download IE9+ WebM support</a> from tools.google.com<br> this includes Edge and Windows 10"},window.onresize=function(){d.setAttribute("width",c.offsetWidth),d.setAttribute("height",c.offsetHeight),a.width=d.width,a.height=d.height},window.onmousemove=function(e){S.style.top=e.pageY+"px",S.style.left=e.pageX+"px"},N.addEventListener("click",function(){q?(q=!1,document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()):(q=!0,document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen())})};