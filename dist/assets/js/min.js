onload=function(){var o,t,n,s=document.querySelector("canvas"),a=s.getContext("2d"),r=document.getElementById("container"),i=document.getElementById("interactive-container"),c=!1,d=document.createElement("video"),l=document.querySelectorAll(".scene"),u=document.querySelectorAll(".plan"),m=document.getElementById("scene1"),g=document.getElementById("scene2"),v=document.querySelector("#scene1 #plan1"),w=document.querySelector("#scene1 #plan2"),f=document.querySelector("#scene2 #plan1"),y=(document.getElementById("svg-falaise"),document.getElementById("Scene1Plan1Fond1")),p=document.getElementById("Scene1Plan1Fond2"),h=document.getElementById("Scene1Plan1Fond1et2"),x=(document.getElementById("Scene1Plan1Fond3"),document.getElementById("Scene1Plan1NuagesArriere1")),E=document.getElementById("Scene1Plan1NuagesArriere2"),L=document.getElementById("Scene1Plan1NuagesArriere3"),I=document.getElementById("Scene1Plan1NuagesAvant1"),A=document.getElementById("Scene1Plan1NuagesAvant2"),P=document.getElementById("Scene1Plan1NuagesAvant3"),T=document.getElementById("Scene1Plan1NuagesAvant4"),B=document.getElementById("Scene1Plan1NuagesAvant5"),M=document.getElementById("Scene1Plan1NuagesAvant6"),S=(document.getElementById("svg-visage"),document.getElementById("Scene1Plan2NuagesArriere"),document.getElementById("Scene1Plan2NuagesArriere1"),document.getElementById("Scene1Plan2NuagesArriere2"),document.getElementById("Scene1Plan2NuagesAvant"),document.getElementById("Scene1Plan2NuagesAvant1"),document.getElementById("Scene1Plan2NuagesAvant2"),document.getElementById("Scene1Plan2NuagesAvant3"),document.querySelector("#Combi")),N=document.querySelector("#Carrosserie"),O=document.getElementById("roueArriere"),b=document.getElementById("roueAvant"),X=document.getElementById("mouse"),Y=document.getElementById("playButton");function q(){X.innerHTML="",X.classList.add("differenceMode"),TweenMax.to(X,.2,{width:10,height:10,ease:Power1.easeOut})}function C(e){X.classList.remove("differenceMode"),TweenMax.to(X,.2,{width:100,height:100,ease:Power1.easeOut}),""!=e?X.innerHTML=e:q()}d.src="assets/video/ours-1.mp4",d.autoPlay=!1,d.loop=!1,d.muted=!1,d.setAttribute("width",r.offsetWidth),d.setAttribute("height",r.offsetHeight),n={video:d,ready:!1},s.width=d.width,s.height=d.height,q(),Y.addEventListener("click",function(){if(!0===n.ready){function e(e,t,n){switch(function(e,t){(new TimelineLite).set(S,{x:-1500,y:e}).to(S,2,{x:-500,transformOrigin:"50% 50%",ease:Power4.easeOut}).to(S,t,{x:900,transformOrigin:"50% 50%",ease:Linear.easeNone},"-=1").to(S,1,{x:1400,transformOrigin:"50% 50%",ease:Power4.easeIn}),TweenMax.to(O,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone}),TweenMax.to(b,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone});var n=20*Math.random()+10;new TimelineMax({repeat:-1}).to(N,.2,{y:"+="+n+"px",ease:Linear.easeNone}).to(N,.2,{y:"-="+n+"10px",ease:Linear.easeNone})}(t,n),S.addEventListener("mouseover",function(e){e.target.classList.contains("blueGradient")?(e.target.classList="",e.target.classList.add("st44")):(e.target.classList="",e.target.classList.add("st45"),e.target.classList.add("blueGradient"))}),C(o),e){case 1:a=t,r.addEventListener("click",function(){var e=new TimelineLite;e.to(S,.1,{y:-300,ease:Power1.easeOut}).to(S,.2,{y:a,ease:Back.easeIn})})}var a}console.log(d.currentTime),o="MOVE",r.addEventListener("mouseover",function(e){var t=e.pageX,n=e.pageY,a=0,o=0;a=s.width/2-t,o=s.height/2-n,TweenMax.to(y,2,{css:{transform:"translateX("+a/17+"px) translateY("+o/17+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(p,2,{css:{transform:"translateX("+a/30+"px) translateY("+o/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(B,2,{css:{transform:"translateX("+a/6+"px) translateY("+o/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(I,2,{css:{transform:"translateX("+a/6+"px) translateY("+o/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(T,2,{css:{transform:"translateX("+a/6+"px) translateY("+o/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(P,2,{css:{transform:"translateX("+a/10+"px) translateY("+o/10+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(M,2,{css:{transform:"translateX("+a/10+"px) translateY("+o/10+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(A,2,{css:{transform:"translateX("+a/15+"px) translateY("+o/15+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(E,2,{css:{transform:"translateX("+a/30+"px) translateY("+o/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(L,2,{css:{transform:"translateX("+a/30+"px) translateY("+o/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(x,2,{css:{transform:"translateX("+a/60+"px) translateY("+o/60+"px)"},ease:Power2.easeOut,overwrite:"none"})}),TweenMax.to(h,7,{css:{transform:"scale(1.06)"},ease:Linear.easeOut}),C(o),n.video.paused&&!c&&n.video.play(),t=setInterval(function(){a.drawImage(n.video,0,0,n.video.width,n.video.height)},20),m.classList.add("isActive"),v.classList.add("isActive"),setTimeout(function(){console.log(parseInt(1e3*d.currentTime)),v.classList.remove("isActive"),w.classList.add("isActive"),o="CLEAR",r.addEventListener("mouseover",function(e){console.log(e.target.x),C(o)}),setTimeout(function(){console.log(d.currentTime),m.classList.remove("isActive"),w.classList.remove("isActive"),g.classList.add("isActive"),f.classList.add("isActive"),o="HOVER",e(0,130,12.7),setTimeout(function(){console.log(d.currentTime),l.forEach(function(e){e.parentNode.classList.remove("isActive")}),u.forEach(function(e){e.parentNode.classList.remove("isActive")}),q(),o="",setTimeout(function(){console.log(d.currentTime),g.classList.add("isActive"),f.classList.add("isActive"),o="CLIC",e(1,0,5.5)},8e3)},15e3)},8e3)},7500),TweenMax.to(r,3,{opacity:1,ease:Linear.easeNone}),TweenMax.to(Y,1,{opacity:0,onComplete:function(){Y.style.display="none",Y.style.visibility="hidden"}}),i.addEventListener("mouseleave",function(e){q()}),i.addEventListener("mouseenter",function(e){C(o)})}}),n.video.oncanplaythrough=function(){console.log("video prete"),n.ready=!0},n.video.onplaying=function(){!(c=!0)},n.video.onpause=function(){!(c=!1),clearInterval(t)},d.onerror=function(){document.body.removeChild(s),document.body.innerHTML+="<h2>There is a problem loading the video</h2><br>",document.body.innerHTML+="Users of IE9+ , the browser does not support WebM videos used by this demo",document.body.innerHTML+="<br><a href='https://tools.google.com/dlpage/webmmf/'> Download IE9+ WebM support</a> from tools.google.com<br> this includes Edge and Windows 10"},window.onresize=function(){d.setAttribute("width",r.offsetWidth),d.setAttribute("height",r.offsetHeight),s.width=d.width,s.height=d.height},window.onmousemove=function(e){X.style.top=e.pageY+"px",X.style.left=e.pageX+"px"}};