onload=function(){var t,e,n,s=document.querySelector("canvas"),a=s.getContext("2d"),o=document.getElementById("container"),r=document.getElementById("interactive-container"),i=!1,c=document.createElement("video"),d=document.querySelectorAll(".scene"),l=document.querySelectorAll(".plan"),u=document.getElementById("scene1"),m=document.getElementById("scene2"),g=document.querySelector("#scene1 #plan1"),w=document.querySelector("#scene1 #plan2"),v=document.querySelector("#scene2 #plan1"),y=(document.getElementById("svg-falaise"),document.getElementById("Scene1Plan1Fond1")),p=document.getElementById("Scene1Plan1Fond2"),x=document.getElementById("Scene1Plan1Fond1et2"),f=(document.getElementById("Scene1Plan1Fond3"),document.getElementById("Scene1Plan1NuagesArriere1")),h=document.getElementById("Scene1Plan1NuagesArriere2"),E=document.getElementById("Scene1Plan1NuagesArriere3"),P=document.getElementById("Scene1Plan1NuagesAvant1"),T=document.getElementById("Scene1Plan1NuagesAvant2"),I=document.getElementById("Scene1Plan1NuagesAvant3"),L=document.getElementById("Scene1Plan1NuagesAvant4"),M=document.getElementById("Scene1Plan1NuagesAvant5"),A=document.getElementById("Scene1Plan1NuagesAvant6"),B=(document.getElementById("svg-visage"),document.getElementById("Scene1Plan2NuagesArriere")),S=document.getElementById("Scene1Plan2NuagesArriere1"),O=document.getElementById("Scene1Plan2NuagesArriere2"),N=document.getElementById("Scene1Plan2NuagesAvant"),b=document.getElementById("Scene1Plan2NuagesAvant1"),X=document.getElementById("Scene1Plan2NuagesAvant2"),Y=document.getElementById("Scene1Plan2NuagesAvant3"),H=document.querySelector("#Combi"),q=document.querySelector("#Carrosserie"),C=document.getElementById("roueArriere"),k=document.getElementById("roueAvant"),W=document.getElementById("mouse"),F=document.getElementById("playButton");function G(){W.innerHTML="",W.classList.add("differenceMode"),TweenMax.to(W,.2,{width:10,height:10,ease:Power1.easeOut})}function V(e){switch(W.classList.remove("differenceMode"),TweenMax.to(W,.2,{width:100,height:100,ease:Power1.easeOut}),e){case"hover":W.innerHTML="HOVER";break;case"move":W.innerHTML="MOVE";break;case"":G()}}c.src="assets/video/ours-1.mp4",c.autoPlay=!1,c.loop=!1,c.muted=!1,c.setAttribute("width",o.offsetWidth),c.setAttribute("height",o.offsetHeight),n={video:c,ready:!1},s.width=c.width,s.height=c.height,G(),F.addEventListener("click",function(){if(!0===n.ready){console.log(c.currentTime),t="move",o.addEventListener("mouseover",function(e){var t=e.pageX,n=e.pageY,a=0,o=0;a=s.width/2-t,o=s.height/2-n,TweenMax.to(y,2,{css:{transform:"translateX("+a/17+"px) translateY("+o/17+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(p,2,{css:{transform:"translateX("+a/30+"px) translateY("+o/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(M,2,{css:{transform:"translateX("+a/6+"px) translateY("+o/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(P,2,{css:{transform:"translateX("+a/6+"px) translateY("+o/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(L,2,{css:{transform:"translateX("+a/6+"px) translateY("+o/6+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(I,2,{css:{transform:"translateX("+a/10+"px) translateY("+o/10+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(A,2,{css:{transform:"translateX("+a/10+"px) translateY("+o/10+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(T,2,{css:{transform:"translateX("+a/15+"px) translateY("+o/15+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(h,2,{css:{transform:"translateX("+a/30+"px) translateY("+o/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(E,2,{css:{transform:"translateX("+a/30+"px) translateY("+o/30+"px)"},ease:Power2.easeOut,overwrite:"none"}),TweenMax.to(f,2,{css:{transform:"translateX("+a/60+"px) translateY("+o/60+"px)"},ease:Power2.easeOut,overwrite:"none"})}),TweenMax.to(x,7,{css:{transform:"scale(1.06)"},ease:Linear.easeOut}),V(t),n.video.paused&&!i&&n.video.play(),e=setInterval(function(){a.drawImage(n.video,0,0,n.video.width,n.video.height)},20),u.classList.add("isActive"),g.classList.add("isActive"),setTimeout(function(){console.log(c.currentTime),g.classList.remove("isActive"),w.classList.add("isActive"),o.addEventListener("mouseover",function(e){var t=e.pageX,n=e.pageY,a=0,o=0;a=s.width/2-t,o=s.height/2-n,TweenMax.to(N,1,{css:{transform:"translateX("+a/10+"px) translateY("+o/10+"px)"},ease:Power2.easeOut}),TweenMax.to(B,1,{css:{transform:"translateX("+a/20+"px) translateY("+o/20+"px)"},ease:Power2.easeOut})}),setTimeout(function(){TweenMax.to(Y,4,{x:s.width+200,y:s.height+200,ease:Power4.easeIn}),TweenMax.to(X,4,{x:-400,y:-400,ease:Power4.easeIn}),TweenMax.to(b,4,{x:-800,y:s.height+100,ease:Power4.easeIn}),TweenMax.to(O,4,{x:s.width,y:-100,ease:Power4.easeIn}),TweenMax.to(S,4,{x:-700,ease:Power4.easeIn})},3e3),setTimeout(function(){console.log(c.currentTime),u.classList.remove("isActive"),w.classList.remove("isActive"),m.classList.add("isActive"),v.classList.add("isActive"),t="hover",function(){(new TimelineLite).set(H,{x:-1500,y:130}).to(H,2,{x:-500,transformOrigin:"50% 50%",ease:Power4.easeOut}).to(H,12.7,{x:900,transformOrigin:"50% 50%",ease:Linear.easeNone},"-=1").to(H,1,{x:1400,transformOrigin:"50% 50%",ease:Power4.easeIn}),TweenMax.to(C,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone}),TweenMax.to(k,2,{rotation:360,transformOrigin:"50% 50%",repeat:-1,ease:Linear.easeNone});var e=20*Math.random()+10;new TimelineMax({repeat:-1}).to(q,.2,{y:"+="+e+"px",ease:Linear.easeNone}).to(q,.2,{y:"-="+e+"10px",ease:Linear.easeNone}),H.addEventListener("mouseover",function(e){e.target.classList.contains("blueGradient")?(e.target.classList="",e.target.classList.add("st44")):(e.target.classList="",e.target.classList.add("st45"),e.target.classList.add("blueGradient"))}),o.addEventListener("click",function(){var e=new TimelineLite;e.to(H,.1,{y:-300,ease:Power1.easeOut}).to(H,.2,{y:130,ease:Back.easeIn})}),V(t)}(),setTimeout(function(){console.log(c.currentTime),d.forEach(function(e){e.parentNode.removeChild(e)}),l.forEach(function(e){e.parentNode.removeChild(e)}),G(),t=""},15500)},8e3)},7500),TweenMax.to(o,3,{opacity:1,ease:Linear.easeNone}),TweenMax.to(F,1,{opacity:0,onComplete:function(){F.style.display="none",F.style.visibility="hidden"}}),r.addEventListener("mouseleave",function(e){G()}),r.addEventListener("mouseenter",function(e){V(t)})}}),n.video.oncanplaythrough=function(){console.log("video prete"),n.ready=!0},n.video.onplaying=function(){!(i=!0)},n.video.onpause=function(){!(i=!1),clearInterval(e)},c.onerror=function(){document.body.removeChild(s),document.body.innerHTML+="<h2>There is a problem loading the video</h2><br>",document.body.innerHTML+="Users of IE9+ , the browser does not support WebM videos used by this demo",document.body.innerHTML+="<br><a href='https://tools.google.com/dlpage/webmmf/'> Download IE9+ WebM support</a> from tools.google.com<br> this includes Edge and Windows 10"},window.onresize=function(){c.setAttribute("width",o.offsetWidth),c.setAttribute("height",o.offsetHeight),s.width=c.width,s.height=c.height},window.onmousemove=function(e){W.style.top=e.pageY+"px",W.style.left=e.pageX+"px"}};